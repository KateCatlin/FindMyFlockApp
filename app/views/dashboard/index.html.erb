<h1>Dashboard#index</h1>
<%= link_to 'View My Profile', user_path(current_user), class: 'btn' %>

<div class="tabs">
  <ul class="list-inline">
    <a href="#" class="select-tab" data-target="job-list">
      <li>Jobs</li>
    </a>
    <a href="#" class="select-tab" data-target="favorite-list">
      <li>Favorites</li>
    </a>
    <a href="#" class="select-tab" data-target="applied-list">
      <li>Applied</li>
    </a>
  </ul>
</div>

<div id="job-list" class="job-listings">
  <h1>Jobs</h1>

  <div class="card-deck">
    <% @jobs.each do |job| %>
    <%= link_to job_path(job) do %>
    <div class="col-xs-12 col-sm-6 col-md-4">
    <div class="card text-center">
      <img class="card-img-top" src="../../assets/images/peopleoffice.jpg" alt="Card image cap">
      <div class="card-block">
        <h4 class="card-title"><%= job.title %></h4>
        <p class="card-text"><%= job.company %></p>
        <p class="card-text"><p><%= job.location %></p>
        <% if job.favorited?(current_user) %>
        <p class="card-text"><%= link_to "unfav", favorite_path(job.favorite_by(current_user)), class: "btn btn-primary", method: :delete %></p>
        <% else %>
        <p class="card-text"><%= link_to "fav", job_favorites_path(job), class: "btn btn-primary", method: :create %></p>
        <% end %>
      </div>
    </div>
      </div>
    <% end %>
    <% end %>
  </div>
</div>

<div id="favorite-list" class="job-listings" hidden>
  <h1>Favorites</h1>

  <div class="card-deck">

    <% @favorited.each do |job| %>
    <%= link_to job_path(job) do %>
    <div class="col-xs-12 col-sm-6 col-md-4">
    <div class="card text-center">
      <img class="card-img-top" src="../../assets/images/peopleoffice.jpg" alt="Card image cap">
      <div class="card-block">
        <h4 class="card-title"><%= job.title %></h4>
        <p class="card-text"><%= job.company %></p>
        <p class="card-text"><p><%= job.location %></p>
        <% if job.favorited?(current_user) %>
        <p class="card-text"><%= link_to "unfav", favorite_path(job.favorite_by(current_user)), class: "btn btn-primary", method: :delete %></p>
        <% else %>
        <p class="card-text"><%= link_to "fav", job_favorites_path(job), class: "btn btn-primary", method: :create %></p>
        <% end %>
      </div>
    </div>
      </div>
    <% end %>
    <% end %>
  </div>
</div>

</div>

<div id="applied-list" class="job-listings" hidden>
  <h1>Applied</h1>

  <div class="card-deck">

    <% @applied.each do |job| %>
    <%= link_to job_path(job) do %>
    <div class="col-xs-12 col-sm-6 col-md-4">
    <div class="card text-center">
      <img class="card-img-top" src="../../assets/images/peopleoffice.jpg" alt="Card image cap">
      <div class="card-block">
        <h4 class="card-title"><%= job.title %></h4>
        <p class="card-text"><%= job.company %></p>
        <p class="card-text"><p><%= job.location %></p>
        <% if job.favorited?(current_user) %>
        <p class="card-text"><%= link_to "unfav", favorite_path(job.favorite_by(current_user)), class: "btn btn-primary", method: :delete %></p>
        <% else %>
        <p class="card-text"><%= link_to "fav", job_favorites_path(job), class: "btn btn-primary", method: :create %></p>
        <% end %>
      </div>
    </div>
  </div>
    <% end %>
    <% end %>
  </div>
</div>

<script>
  const tabs = document.querySelectorAll(".select-tab")
  const lists = document.querySelectorAll(".job-listings")
  tabs.forEach(function(tab) {
    tab.addEventListener("click", function(event) {
      let target = tab.getAttribute("data-target");
      let toActivateTab = document.getElementById(target);
      lists.forEach(list => list.hidden = true);
      toActivateTab.hidden = false
    })
  })
</script>
